<html lang="en"><head><meta charset="utf-8"/><meta content="width=device-width, initial-scale=1.0" name="viewport"/><title>&#79;&#114;&#116;&#105;&#122;&#32;&#70;&#97;&#99;&#105;&#108;&#105;&#116;&#121;&#32;&#67;&#104;&#101;&#99;&#107;&#101;&#114;</title><link href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" rel="stylesheet"/><script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script><style>        /* ======================= BASE ======================= */        body {            width: 100%;            font-family: 'Orbitron', sans-serif;            background-color: #0a0f1e;            color: #e0e6f0;            margin: 0;            padding: 0;        }        #map {            width: 100%;            height: 500px;            position: relative;        }        /* ======================= INPUTS ======================= */        .input-label {            margin-left: 10px;            display: inline-block;        }        .input-container {            margin: 20px 0;        }        label,        input {            margin-right: 10px;        }        input[type="text"] {            width: 350px;            height: 20px;        }        button {            padding: 8px 12px;            border-radius: 6px;            border: none;            cursor: pointer;            background: #1976d2;            color: #fff;            transition: 0.2s;        }        button.secondary {            background: #4CAF50;        }        button:disabled {            background-color: #3a4e5f;            cursor: not-allowed;        }        /* ======================= WATERMARK ======================= */        #watermark {            position: fixed;            bottom: 10px;            right: 10px;            font-size: 14px;            color: #00f7ff;            background: rgba(20, 30, 60, 0.85);            padding: 6px 14px;            border-radius: 10px;            border: 1px solid rgba(0, 247, 255, 0.6);            font-family: "Orbitron", sans-serif;            letter-spacing: 1px;            box-shadow: 0 0 15px rgba(0, 247, 255, 0.4);            text-shadow: 0 0 6px rgba(0, 247, 255, 0.9), 0 0 12px rgba(0, 247, 255, 0.6);            z-index: 1500;            animation: watermarkGlow 3s infinite alternate;        }        @keyframes watermarkGlow {            from {                text-shadow: 0 0 6px rgba(0, 247, 255, 0.6), 0 0 12px rgba(0, 247, 255, 0.3);                box-shadow: 0 0 10px rgba(0, 247, 255, 0.2);            }            to {                text-shadow: 0 0 12px rgba(0, 247, 255, 1), 0 0 20px rgba(0, 247, 255, 0.7);                box-shadow: 0 0 20px rgba(0, 247, 255, 0.6);            }        }        /* ======================= MESSAGE BOX ======================= */        .message-box {            position: fixed;            top: 50%;            left: 50%;            transform: translate(-50%, -50%);            background: rgba(20, 30, 60, 0.95);            color: #e0f7ff;            border: 2px solid #00f7ff;            padding: 20px 30px;            border-radius: 12px;            box-shadow: 0 0 25px #00f7ff, 0 0 50px rgba(0, 247, 255, 0.5);            text-align: center;            z-index: 10000;            animation: fadeIn 0.3s ease-in-out;        }        .message-box button {            margin-top: 15px;            padding: 8px 18px;            background: #00f7ff;            border: none;            color: #0a0f1e;            font-weight: bold;            border-radius: 6px;            cursor: pointer;            box-shadow: 0 0 10px #00f7ff;            transition: all 0.2s ease-in-out;        }        .message-box button:hover {            background: #00cce7;            box-shadow: 0 0 15px #00eaff;        }        @keyframes fadeIn {            from {                opacity: 0;                transform: translate(-50%, -48%);            }            to {                opacity: 1;                transform: translate(-50%, -50%);            }        }        /* ======================= LEGEND ======================= */        .legend {            position: absolute;            top: 10px;            right: 10px;            background: rgba(20, 30, 60, 0.9);            padding: 15px;            border: 2px solid #00f7ff;            border-radius: 8px;            font-size: 11px;            color: #e0f7ff;            box-shadow: 0 0 20px rgba(0, 247, 255, 0.3);            z-index: 1000;        }        .legend div {            margin: 6px 0;        }        /* ======================= TABLE ======================= */        table {            width: 100%;            border-collapse: collapse;            table-layout: fixed;        }        th,        td {            border: 1px solid #ccc;            padding: 8px;            text-align: left;            overflow-x: auto;            overflow-y: hidden;            white-space: nowrap;            max-width: 150px;        }        td::-webkit-scrollbar {            height: 6px;        }        td::-webkit-scrollbar-thumb {            background: #888;            border-radius: 3px;        }        td::-webkit-scrollbar-track {            background: #f1f1f1;        }        #resultcnt {            display: inline-block;            font-size: 14px;            color: rgb(79, 187, 236);            margin-top: 10px;        }        /* ======================= REPORT PANEL ======================= */        #reportdate {            position: absolute;            top: 10px;            left: 10px;            font-size: 14px;            color: #00f7ff;            background: rgba(20, 30, 60, 0.85);            padding: 6px 14px;            border-radius: 8px;            font-family: "Orbitron", sans-serif;            letter-spacing: 1px;            border: 1px solid rgba(0, 247, 255, 0.6);            border-bottom: 3px solid transparent;            border-image: linear-gradient(to right, #ff004c, #007bff);            border-image-slice: 1;            text-shadow: 0 0 6px rgba(0, 247, 255, 0.9), 0 0 12px rgba(0, 247, 255, 0.6);            box-shadow: 0 0 12px rgba(0, 247, 255, 0.3);            z-index: 2000;            animation: flicker 2.5s infinite alternate;            cursor: pointer; /* <-- add this line */        }        @keyframes flicker {            from {                opacity: 0.85;                text-shadow: 0 0 6px rgba(0, 247, 255, 0.6), 0 0 12px rgba(0, 247, 255, 0.3);                box-shadow: 0 0 10px rgba(0, 247, 255, 0.2);            }            to {                opacity: 1;                text-shadow: 0 0 12px rgba(0, 247, 255, 1), 0 0 20px rgba(0, 247, 255, 0.8);                box-shadow: 0 0 18px rgba(0, 247, 255, 0.5);            }        }        /* ======================= LOADING ======================= */        #loading {            display: none;            position: fixed;            top: 0;            left: 0;            width: 100%;            height: 100%;            background: rgba(255, 255, 255, 0.8);            z-index: 9999;            display: flex;            justify-content: center;            align-items: center;            flex-direction: column;        }        .spinner {            border: 6px solid #ddd;            border-top: 6px solid #333;            border-radius: 50%;            width: 40px;            height: 40px;            animation: spin 1s linear infinite;            margin-bottom: 10px;        }        @keyframes spin {            0% {                transform: rotate(0deg);            }            100% {                transform: rotate(360deg);            }        }        .text {            font-family: sans-serif;            color: #333;        }        /* ======================= INSTRUCTIONS MODAL ======================= */        #instructionsBtn {            position: absolute;            top: 10px;            right: 10px;            background: rgba(20, 30, 60, 0.9);            color: #00f7ff;            border: 1px solid rgba(0, 247, 255, 0.6);            border-radius: 50%;            width: 36px;            height: 36px;            font-size: 18px;            font-family: "Orbitron", sans-serif;            box-shadow: 0 0 10px rgba(0, 247, 255, 0.6);            cursor: pointer;            z-index: 2000;            transition: 0.3s;        }        #instructionsBtn:hover {            background: rgba(0, 247, 255, 0.2);            color: #fff;            transform: scale(1.1);        }        #instructionsBox {            display: none;            position: fixed;            top: 0;            left: 0;            width: 100%;            height: 100%;            background: rgba(0, 0, 0, 0.6);            z-index: 3000;            display: flex;            align-items: center;            justify-content: center;        }        .instructions-content {            background: rgba(20, 30, 60, 0.95);            padding: 20px 30px;            border-radius: 15px;            border: 1px solid rgba(0, 247, 255, 0.6);            box-shadow: 0 0 25px rgba(0, 247, 255, 0.7);            color: #00f7ff;            font-family: "Orbitron", sans-serif;            width: 400px;            max-width: 80%;            text-align: left;        }        .instructions-content h2 {            margin-bottom: 15px;            text-align: center;        }        .instructions-content ul {            margin-left: 20px;            margin-bottom: 20px;        }        .instructions-content button {            display: block;            margin: 0 auto;            padding: 6px 16px;            border-radius: 8px;            background: #00f7ff;            color: #141e3c;            font-family: "Orbitron", sans-serif;            cursor: pointer;            border: none;            transition: 0.3s;        }        .instructions-content button:hover {            background: #00c6d4;        }    </style></head><body><div id="reportdate"><strong>&#68;&#82;&#77;&#58;</strong>&#65;&#117;&#103;&#117;&#115;&#116;&#32;&#49;&#53;&#44;&#32;&#50;&#48;&#50;&#53;</div><div style="height: 20px; text-align: center; margin-top: 10px;"><h2>&#70;&#65;&#67;&#73;&#76;&#73;&#84;&#89;&#32;&#67;&#72;&#69;&#67;&#75;&#69;&#82;</h2></div><div class="input-container"><label class="input-label" for="locationInput">&#73;&#110;&#112;&#117;&#116;&#32;&#76;&#111;&#99;&#97;&#116;&#105;&#111;&#110;</label><input id="locationInput" placeholder="Enter address or latitude, longitude" type="text"/><button disabled="" id="showLocationBtn" onclick="processInput()">&#83;&#101;&#97;&#114;&#99;&#104;</button><button id="downloadCSV" onclick="exportTableToCSV('nearest_facility.csv')" style="display: none;">&#68;&#111;&#119;&#110;&#108;&#111;&#97;&#100;&#10;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#67;&#83;&#86;</button><span id="resultcnt" style="float: right;"></span></div><div id="loading"><div class="spinner"></div><div class="text">&#77;&#97;&#103;&#104;&#105;&#110;&#116;&#97;&#121;&#32;&#75;&#97;&#32;&#72;&#97;&#33;&#32;&#45;&#32;&#76;&#111;&#97;&#100;&#105;&#110;&#103;&#32;&#80;&#97;&#33;&#46;</div></div><div id="map"><div class="legend"><h4>&#76;&#101;&#103;&#101;&#110;&#100;&#58;<strong style="color: #cf26f1; font-size: 11px;">&#37;&#85;&#116;&#105;&#108;</strong></h4><div style="display: flex; flex-direction: column; gap: 4px; font-size: 14px;"><div style="font-size: 10px;"><span style="display: inline-block; width: 12px; height: 12px; background-color: blue; margin-right: 8px; border-radius: 50%;"></span>&#83;&#101;&#97;&#114;&#99;&#104;</div><div style="font-size: 10px;"><span style="display: inline-block; width: 12px; height: 12px; background-color: green; margin-right: 8px; border-radius: 50%;"></span>&#8804;&#32;&#50;&#53;&#37;</div><div style="font-size: 10px;"><span style="display: inline-block; width: 12px; height: 12px; background-color: yellow; margin-right: 8px; border-radius: 50%;"></span>&#8804;&#32;&#53;&#48;&#37;</div><div style="font-size: 10px;"><span style="display: inline-block; width: 12px; height: 12px; background-color: orange; margin-right: 8px; border-radius: 50%;"></span>&#8804;&#32;&#55;&#48;&#37;</div><div style="font-size: 10px;"><span style="display: inline-block; width: 12px; height: 12px; background-color: red; margin-right: 8px; border-radius: 50%;"></span>&#62;&#32;&#55;&#48;&#37;</div></div></div></div><br/><table id="resultTable" style="display:none;"><thead><tr><th>&#68;&#80;&#47;&#78;&#97;&#112;</th><th>&#67;&#97;&#98;&#105;&#110;&#101;&#116;</th><th>&#76;&#97;&#116;&#105;&#116;&#117;&#100;&#101;</th><th>&#76;&#111;&#110;&#103;&#105;&#116;&#117;&#100;&#101;</th><th>&#68;&#105;&#115;&#116;&#97;&#110;&#99;&#101;&#32;&#40;&#75;&#109;&#41;</th><th>&#83;&#101;&#108;&#108;&#97;&#98;&#108;&#101;&#76;&#105;&#110;&#101;&#115;</th><th>&#85;&#116;&#105;&#108;&#105;&#122;&#97;&#116;&#105;&#111;&#110;</th><th>&#67;&#97;&#98;&#32;&#84;&#121;&#112;&#101;</th><th>&#65;&#100;&#100;&#114;&#101;&#115;&#115;</th><th>&#66;&#108;&#100;&#103;&#32;&#78;&#97;&#109;&#101;</th><th>&#66;&#97;&#110;&#100;&#119;&#105;&#100;&#116;&#104;</th></tr></thead><tbody></tbody></table><button id="instructionsBtn">&#63;</button><div id="instructionsBox" style="display: none;"><div class="instructions-content"><h2>&#128214;&#32;&#70;&#97;&#99;&#105;&#108;&#105;&#116;&#121;&#32;&#67;&#104;&#101;&#99;&#107;&#101;&#114;&#32;&#73;&#110;&#115;&#116;&#114;&#117;&#99;&#116;&#105;&#111;&#110;&#115;</h2><ul><li>&#69;&#110;&#116;&#101;&#114;&#32;&#116;&#104;&#101;&#32;&#102;&#97;&#99;&#105;&#108;&#105;&#116;&#121;&#32;&#99;&#111;&#111;&#114;&#100;&#105;&#110;&#97;&#116;&#101;&#115;&#32;&#40;&#108;&#97;&#116;&#105;&#116;&#117;&#100;&#101;&#44;&#32;&#108;&#111;&#110;&#103;&#105;&#116;&#117;&#100;&#101;&#41;&#32;&#105;&#110;&#32;&#116;&#104;&#101;&#32;&#105;&#110;&#112;&#117;&#116;&#32;&#102;&#105;&#101;&#108;&#100;&#46;</li><li>&#67;&#104;&#111;&#111;&#115;&#101;&#32;&#116;&#104;&#101;&#32;&#116;&#121;&#112;&#101;&#32;&#111;&#102;&#32;&#99;&#97;&#98;&#105;&#110;&#101;&#116;&#32;&#40;&#73;&#110;&#100;&#111;&#111;&#114;&#32;&#47;&#32;&#79;&#117;&#116;&#100;&#111;&#111;&#114;&#41;&#46;</li><li>&#83;&#101;&#116;&#32;&#121;&#111;&#117;&#114;&#32;&#100;&#101;&#115;&#105;&#114;&#101;&#100;&#32;&#117;&#116;&#105;&#108;&#105;&#122;&#97;&#116;&#105;&#111;&#110;&#32;&#116;&#104;&#114;&#101;&#115;&#104;&#111;&#108;&#100;&#32;&#40;&#37;&#41;&#46;</li><li>&#67;&#108;&#105;&#99;&#107;<b>&#83;&#101;&#97;&#114;&#99;&#104;</b>&#116;&#111;&#32;&#99;&#104;&#101;&#99;&#107;&#32;&#97;&#118;&#97;&#105;&#108;&#97;&#98;&#108;&#101;&#32;&#110;&#101;&#97;&#114;&#98;&#121;&#32;&#102;&#97;&#99;&#105;&#108;&#105;&#116;&#105;&#101;&#115;&#46;</li><li>&#82;&#101;&#115;&#117;&#108;&#116;&#115;&#32;&#119;&#105;&#108;&#108;&#32;&#98;&#101;&#32;&#115;&#104;&#111;&#119;&#110;&#32;&#111;&#110;&#32;&#116;&#104;&#101;&#32;&#109;&#97;&#112;&#32;&#119;&#105;&#116;&#104;&#32;&#99;&#111;&#108;&#111;&#114;&#45;&#99;&#111;&#100;&#101;&#100;&#32;&#117;&#116;&#105;&#108;&#105;&#122;&#97;&#116;&#105;&#111;&#110;&#46;</li></ul><button onclick="closeInstructions()">&#67;&#108;&#111;&#115;&#101;</button></div></div><div id="messageBox" style="display: none;"><h2>&#77;&#101;&#115;&#115;&#97;&#103;&#101;</h2><p id="messageContent"></p><button onclick="closeMessageBox()">&#79;&#75;</button></div><div id="watermark">&#67;&#114;&#101;&#97;&#116;&#101;&#100;&#32;&#66;&#121;&#58;<strong>&#83;&#111;&#110;&#110;&#121;&#32;&#79;&#114;&#116;&#105;&#122;</strong> </div><script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script><script>var a0_0x5b1fa2=a0_0x20bd;(function(_0x3b34a0,_0x3d311f){var _0x310f5c=a0_0x20bd,_0x2b9238=_0x3b34a0();while(!![]){try{var _0x5776bc=-parseInt(_0x310f5c(0x1f3))/0x1*(parseInt(_0x310f5c(0x204))/0x2)+-parseInt(_0x310f5c(0x209))/0x3+parseInt(_0x310f5c(0x265))/0x4+-parseInt(_0x310f5c(0x22e))/0x5*(parseInt(_0x310f5c(0x20d))/0x6)+-parseInt(_0x310f5c(0x1ec))/0x7+parseInt(_0x310f5c(0x220))/0x8*(-parseInt(_0x310f5c(0x230))/0x9)+parseInt(_0x310f5c(0x229))/0xa*(parseInt(_0x310f5c(0x1ea))/0xb);if(_0x5776bc===_0x3d311f)break;else _0x2b9238['push'](_0x2b9238['shift']());}catch(_0x488847){_0x2b9238['push'](_0x2b9238['shift']());}}}(a0_0x136f,0x745c1));var map=L['map'](a0_0x5b1fa2(0x1f0))[a0_0x5b1fa2(0x240)]([51.505,-0.09],0x10);L[a0_0x5b1fa2(0x242)]('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{'attribution':a0_0x5b1fa2(0x235)})[a0_0x5b1fa2(0x22a)](map);var allLocations=[],markers=[],csvURL=a0_0x5b1fa2(0x223);function loadCSVData(){var _0x1a81ac=a0_0x5b1fa2;Papa[_0x1a81ac(0x238)](csvURL,{'download':!![],'header':!![],'complete':function(_0x2cb0ba){var _0x1f585a=_0x1a81ac;allLocations=_0x2cb0ba[_0x1f585a(0x24d)],console[_0x1f585a(0x1f7)](_0x1f585a(0x1f9),allLocations),MessageBox(_0x1f585a(0x231)),document[_0x1f585a(0x216)](_0x1f585a(0x25d))[_0x1f585a(0x24c)]=![],document[_0x1f585a(0x216)]('loading')[_0x1f585a(0x239)][_0x1f585a(0x226)]='none';},'error':function(_0x5574a2){var _0x2f5f39=_0x1a81ac;console[_0x2f5f39(0x1ed)]('❌\x20Error\x20Loading\x20Data:',_0x5574a2),MessageBox('Error\x20Loading\x20Data!'),document[_0x2f5f39(0x216)](_0x2f5f39(0x25d))['disabled']=![];}});}function clearPreviousData(){var _0x400b3b=a0_0x5b1fa2;markers['forEach'](function(_0x4606dd){var _0x4a970a=a0_0x20bd;map[_0x4a970a(0x261)](_0x4606dd);}),markers=[];var _0x5ef282=document[_0x400b3b(0x219)](_0x400b3b(0x24b));_0x5ef282['innerHTML']='',document[_0x400b3b(0x216)](_0x400b3b(0x1fc))['style'][_0x400b3b(0x226)]='none',document[_0x400b3b(0x216)](_0x400b3b(0x23d))[_0x400b3b(0x239)][_0x400b3b(0x226)]=_0x400b3b(0x237),document[_0x400b3b(0x216)](_0x400b3b(0x258))[_0x400b3b(0x239)][_0x400b3b(0x226)]=_0x400b3b(0x237);}function a0_0x20bd(_0x7d9506,_0x54f9d2){var _0x3806ee=a0_0x136f();return a0_0x20bd=function(_0xd48c9,_0x5a6805){_0xd48c9=_0xd48c9-0x1e7;var _0x136fc2=_0x3806ee[_0xd48c9];return _0x136fc2;},a0_0x20bd(_0x7d9506,_0x54f9d2);}function a0_0x136f(){var _0x31b40a=['instructionsBtn','none','parse','style','div','split','body','resultTable','createElement','No\x20nearby\x20facility\x20found\x20within\x20the\x20radius.','setView','table','tileLayer','width','stringify','appendChild','green','constructor','.text','toFixed','top','#resultTable\x20tbody','disabled','data','forEach','coords','<br>Lng:\x20','locationInput','https://script.google.com/macros/s/AKfycbzfFpeke4qAaX7PNpaew_v70e7367LokEaSsEsl2pUPQBbPydVXhq_VaSXtwBgMmysw6g/exec','bindPopup','userAgent','catch','#resultTable\x20tr','distance','resultcnt','removeChild','td,\x20th','latitude','https://script.google.com/macros/s/AKfycbyVR-5Ku_jOar2jXAyayG3izdS7OOC-EmpW_3z_Hx0_-bu0S2PHmzAFLjZ8USf-9iaqLw/exec','showLocationBtn','innerText','sin','toISOString','removeLayer','atan2','flex','search','1282020kgecbK','⚠️\x20Skipping\x20invalid\x20location:','messageBox','json','application/json','some','17841593dRoOdN','apply','281001BBGlUM','error','📏\x20Distance\x20to\x20','then','map','value','dp\x20util','23124lomWlC','language','sqrt','N/A','log','className','✅\x20Data\x20Loaded:','join','href','downloadCSV','\x20nearby\x20facility\x20found!','Unable\x20to\x20retrieve\x20your\x20location.\x20Error:\x20','(((.+)+)+)+$','final\x20mbps','POST','https://nominatim.openstreetmap.org/search?format=json&q=','length','24loeEIy','onload','push','slice','reportdate','1032453zxqZWZ','click','text/csv','Address\x20not\x20found.','6WuOSOS','toString','inline-block','Loading...','textContent','circleMarker','Input\x20box\x20with\x20id\x20\x22locationInput\x22\x20not\x20found.','cos','instructionsBox','getElementById','cab_dp_type','createObjectURL','querySelector','red','Please\x20enter\x20valid\x20latitude\x20and\x20longitude\x20values.','Searching\x20nearby\x20facilities.','geolocation','name','getCurrentPosition','336LcnZBA','no-cors','cabinet','https://docs.google.com/spreadsheets/d/e/2PACX-1vQ12t4bUUV00coFAvcrTP1tolCv-0FBVXxej1wqMWKR8Wp90DdCkwGx5fdDzZsH48G0A92zpSbKm14o/pub?output=csv','</p><button\x20onclick=\x22this.parentElement.remove()\x22>OK</button>','test','display','meters','loading','10kBqerp','addTo','innerHTML','trim','querySelectorAll','2324005XUdCzf','warn','72702fsCwhj','Data\x20Loaded\x20Successfully!','longitude','🔍\x20Checking\x20location\x20','orange','&copy;\x20<a\x20href=\x22https://www.openstreetmap.org/copyright\x22>OpenStreetMap</a>\x20contributors'];a0_0x136f=function(){return _0x31b40a;};return a0_0x136f();}function processInput(){var _0x3557b0=a0_0x5b1fa2;let _0x4343c2=document['getElementById'](_0x3557b0(0x251))[_0x3557b0(0x1f1)][_0x3557b0(0x22c)]();if(/^-?\d+(\.\d+)?[ ,]+-?\d+(\.\d+)?$/['test'](_0x4343c2)){let [_0x469f16,_0x196d3a]=_0x4343c2[_0x3557b0(0x23b)](/[ ,]+/)[_0x3557b0(0x1f0)](Number);updateMap(_0x469f16,_0x196d3a);}else fetch(_0x3557b0(0x202)+encodeURIComponent(_0x4343c2))[_0x3557b0(0x1ef)](_0xc81041=>_0xc81041[_0x3557b0(0x1e7)]())[_0x3557b0(0x1ef)](_0x53c927=>{var _0x4e030a=_0x3557b0;if(_0x53c927[_0x4e030a(0x203)]>0x0){let {lat:_0xc0e72,lon:_0x9a6b5f}=_0x53c927[0x0];updateMap(parseFloat(_0xc0e72),parseFloat(_0x9a6b5f));}else clearPreviousData(),MessageBox(_0x4e030a(0x20c));})[_0x3557b0(0x255)](()=>MessageBox('Geocoding\x20error.'));}function updateMap(_0x21d43b,_0x1a4acc){var _0x488893=a0_0x5b1fa2,_0x4b5403=document[_0x488893(0x216)](_0x488893(0x25d)),_0x25ab3e=document[_0x488893(0x216)](_0x488893(0x228)),_0x23763c=document[_0x488893(0x216)](_0x488893(0x258)),_0x45d483=document[_0x488893(0x216)](_0x488893(0x1fc));document[_0x488893(0x216)](_0x488893(0x1fc)),!isNaN(_0x21d43b)&&!isNaN(_0x1a4acc)?(_0x4b5403[_0x488893(0x24c)]=!![],_0x45d483[_0x488893(0x239)]['display']='none',showLoading(_0x488893(0x21c)),setTimeout(()=>{var _0x595638=_0x488893;clearPreviousData(),map[_0x595638(0x240)]([_0x21d43b,_0x1a4acc],0x10);var _0x19079d=L[_0x595638(0x212)]([_0x21d43b,_0x1a4acc],{'radius':0xa,'color':'blue','fillColor':'blue','fillOpacity':0.3})['addTo'](map)['bindPopup']('<b>Search\x20Location:\x20</b>\x20'+_0x21d43b+',\x20'+_0x1a4acc)['openPopup']();markers['push'](_0x19079d);var _0x3ad222=findNearbyLocations(_0x21d43b,_0x1a4acc,0xc8);updateTable(_0x3ad222),addMarkersToMap(_0x3ad222),hideLoading(),_0x4b5403[_0x595638(0x24c)]=![],_0x3ad222['length']===0x0?MessageBox(_0x595638(0x23f)):(_0x23763c[_0x595638(0x211)]=_0x3ad222[_0x595638(0x203)]+_0x595638(0x1fd),_0x23763c['style'][_0x595638(0x226)]=_0x595638(0x20f),MessageBox(_0x3ad222[_0x595638(0x203)]+'\x20nearby\x20facility\x20found!'));},0x64)):MessageBox(_0x488893(0x21b));}function calculateDistance(_0x2bfebf,_0x2e19d1,_0x3b5d3f,_0x45d5f5){var _0x425131=a0_0x5b1fa2,_0x34abc8=0x6136b8,_0x2c1c69=_0x2bfebf*Math['PI']/0xb4,_0x2d7840=_0x3b5d3f*Math['PI']/0xb4,_0x3fee50=(_0x3b5d3f-_0x2bfebf)*Math['PI']/0xb4,_0x41de5e=(_0x45d5f5-_0x2e19d1)*Math['PI']/0xb4,_0x35438c=Math[_0x425131(0x25f)](_0x3fee50/0x2)*Math[_0x425131(0x25f)](_0x3fee50/0x2)+Math[_0x425131(0x214)](_0x2c1c69)*Math[_0x425131(0x214)](_0x2d7840)*Math[_0x425131(0x25f)](_0x41de5e/0x2)*Math[_0x425131(0x25f)](_0x41de5e/0x2),_0x2d6664=0x2*Math[_0x425131(0x262)](Math['sqrt'](_0x35438c),Math[_0x425131(0x1f5)](0x1-_0x35438c)),_0x534df3=_0x34abc8*_0x2d6664;return _0x534df3;}function findNearbyLocations(_0x2e1e99,_0x279177,_0x422bc5){var _0x463684=a0_0x5b1fa2;console['log']('📍\x20Searching\x20for\x20locations\x20near:',_0x2e1e99,_0x279177,'within',_0x422bc5,_0x463684(0x227));var _0x17245e=[];return allLocations['forEach'](function(_0x4936b8,_0x54fcd1){var _0x392a21=_0x463684,_0x28b531=parseFloat(_0x4936b8[_0x392a21(0x25b)]),_0x3e6ef7=parseFloat(_0x4936b8['longitude']);console[_0x392a21(0x1f7)](_0x392a21(0x233)+_0x54fcd1+':',_0x4936b8[_0x392a21(0x21e)],_0x28b531,_0x3e6ef7);if(!isNaN(_0x28b531)&&!isNaN(_0x3e6ef7)){var _0x158cf7=calculateDistance(_0x2e1e99,_0x279177,_0x28b531,_0x3e6ef7);console['log'](_0x392a21(0x1ee)+_0x4936b8[_0x392a21(0x21e)]+':',_0x158cf7,_0x392a21(0x227)),_0x158cf7<=_0x422bc5&&_0x17245e[_0x392a21(0x206)]({..._0x4936b8,'distance':_0x158cf7});}else console['warn'](_0x392a21(0x266),_0x4936b8);}),_0x17245e['sort'](function(_0x20ff14,_0x8e64cb){var _0x119c1c=_0x463684;return _0x20ff14['distance']-_0x8e64cb[_0x119c1c(0x257)];}),console[_0x463684(0x1f7)]('✅\x20Nearby\x20Locations\x20Found:',_0x17245e[_0x463684(0x203)]),_0x17245e[_0x463684(0x207)](0x0,0x3e8);}function updateTable(_0x1ca890){var _0x15b802=a0_0x5b1fa2;document['getElementById']('resultTable')[_0x15b802(0x239)]['display']=_0x15b802(0x241);var _0x569734=document[_0x15b802(0x219)](_0x15b802(0x24b)),_0x173e1b=document[_0x15b802(0x216)](_0x15b802(0x1fc));_0x569734[_0x15b802(0x22b)]='';if(_0x1ca890[_0x15b802(0x203)]===0x0){_0x173e1b[_0x15b802(0x239)][_0x15b802(0x226)]=_0x15b802(0x237);return;}_0x1ca890[_0x15b802(0x24e)](function(_0x3e48b2){var _0xbd1a8c=_0x15b802,_0x523bc0=document[_0xbd1a8c(0x23e)]('tr'),_0x3d4a4b=document[_0xbd1a8c(0x23e)]('td');_0x3d4a4b[_0xbd1a8c(0x211)]=_0x3e48b2['dp']||_0xbd1a8c(0x1f6),_0x523bc0['appendChild'](_0x3d4a4b);var _0x4ec285=document['createElement']('td');_0x4ec285[_0xbd1a8c(0x211)]=_0x3e48b2[_0xbd1a8c(0x222)]||_0xbd1a8c(0x1f6),_0x523bc0[_0xbd1a8c(0x245)](_0x4ec285);var _0x3eba77=document[_0xbd1a8c(0x23e)]('td');_0x3eba77[_0xbd1a8c(0x211)]=_0x3e48b2[_0xbd1a8c(0x25b)],_0x523bc0['appendChild'](_0x3eba77);var _0x4e9636=document[_0xbd1a8c(0x23e)]('td');_0x4e9636[_0xbd1a8c(0x211)]=_0x3e48b2['longitude'],_0x523bc0[_0xbd1a8c(0x245)](_0x4e9636);var _0x14c99d=document[_0xbd1a8c(0x23e)]('td');_0x14c99d[_0xbd1a8c(0x211)]=(_0x3e48b2['distance']/0x3e8)['toFixed'](0x2)+'\x20km',_0x523bc0['appendChild'](_0x14c99d);var _0x2775eb=document[_0xbd1a8c(0x23e)]('td');_0x2775eb['textContent']=_0x3e48b2['dp\x20sellable\x20lines']||_0xbd1a8c(0x1f6),_0x523bc0[_0xbd1a8c(0x245)](_0x2775eb);var _0x3eb6eb=document[_0xbd1a8c(0x23e)]('td');_0x3e48b2['dp\x20util']?_0x3eb6eb[_0xbd1a8c(0x211)]=(_0x3e48b2[_0xbd1a8c(0x1f2)]*0x64)[_0xbd1a8c(0x249)](0x2)+'%':_0x3eb6eb[_0xbd1a8c(0x211)]='N/A';_0x523bc0[_0xbd1a8c(0x245)](_0x3eb6eb);var _0xceed=document[_0xbd1a8c(0x23e)]('td');_0xceed[_0xbd1a8c(0x211)]=_0x3e48b2[_0xbd1a8c(0x217)]||_0xbd1a8c(0x1f6),_0x523bc0[_0xbd1a8c(0x245)](_0xceed);var _0x32e471=document[_0xbd1a8c(0x23e)]('td');_0x32e471[_0xbd1a8c(0x211)]=_0x3e48b2['location']||'N/A',_0x523bc0['appendChild'](_0x32e471);var _0x448307=document[_0xbd1a8c(0x23e)]('td');_0x448307[_0xbd1a8c(0x211)]=_0x3e48b2['building\x20served']||'N/A',_0x523bc0[_0xbd1a8c(0x245)](_0x448307);var _0x40c4a4=document[_0xbd1a8c(0x23e)]('td');_0x40c4a4[_0xbd1a8c(0x211)]=_0x3e48b2[_0xbd1a8c(0x200)]||_0xbd1a8c(0x1f6),_0x523bc0['appendChild'](_0x40c4a4),_0x569734[_0xbd1a8c(0x245)](_0x523bc0);}),_0x173e1b['style']['display']=_0x15b802(0x20f);}function addMarkersToMap(_0x4a1284){var _0x579f4f=a0_0x5b1fa2;fetch(_0x579f4f(0x252),{'method':'POST','mode':'no-cors','headers':{'Content-Type':_0x579f4f(0x1e8)},'body':JSON[_0x579f4f(0x244)]({'timestamp':new Date()['toISOString'](),'userAgent':navigator[_0x579f4f(0x254)],'referrer':document['referrer'],'page':location[_0x579f4f(0x1fb)]})}),_0x4a1284[_0x579f4f(0x24e)](function(_0x596abb){var _0x2ed4f9=_0x579f4f,_0x4d7c1c=parseFloat(_0x596abb[_0x2ed4f9(0x1f2)]),_0x2f6ddf;if(_0x4d7c1c<=0.25)_0x2f6ddf=_0x2ed4f9(0x246);else{if(_0x4d7c1c<=0.5)_0x2f6ddf='yellow';else _0x4d7c1c<=0.7?_0x2f6ddf=_0x2ed4f9(0x234):_0x2f6ddf=_0x2ed4f9(0x21a);}var _0x179fcf=L[_0x2ed4f9(0x212)]([_0x596abb[_0x2ed4f9(0x25b)],_0x596abb[_0x2ed4f9(0x232)]],{'color':_0x2f6ddf,'fillColor':_0x2f6ddf,'fillOpacity':0.5,'radius':0xa})[_0x2ed4f9(0x22a)](map)[_0x2ed4f9(0x253)]('<b>'+_0x596abb['dp']+'</b><br>Lat:\x20'+_0x596abb[_0x2ed4f9(0x25b)]+_0x2ed4f9(0x250)+_0x596abb[_0x2ed4f9(0x232)]);markers[_0x2ed4f9(0x206)](_0x179fcf);});}function exportTableToCSV(_0x32c720){var _0x351d9a=a0_0x5b1fa2,_0x5ef407=[],_0x186044=document[_0x351d9a(0x22d)](_0x351d9a(0x256));for(var _0x4edebc=0x0;_0x4edebc<_0x186044['length'];_0x4edebc++){var _0x425752=[],_0x1c7981=_0x186044[_0x4edebc][_0x351d9a(0x22d)](_0x351d9a(0x25a));for(var _0x14b88c=0x0;_0x14b88c<_0x1c7981[_0x351d9a(0x203)];_0x14b88c++){_0x425752[_0x351d9a(0x206)]('\x22'+_0x1c7981[_0x14b88c][_0x351d9a(0x25e)]+'\x22');}_0x5ef407[_0x351d9a(0x206)](_0x425752[_0x351d9a(0x1fa)](','));}var _0x55a1c7=new Blob([_0x5ef407['join']('\x0a')],{'type':_0x351d9a(0x20b)}),_0x1c8189=document[_0x351d9a(0x23e)]('a');_0x1c8189[_0x351d9a(0x1fb)]=URL[_0x351d9a(0x218)](_0x55a1c7),_0x1c8189['download']=_0x32c720,document[_0x351d9a(0x23c)][_0x351d9a(0x245)](_0x1c8189),_0x1c8189[_0x351d9a(0x20a)](),document[_0x351d9a(0x23c)][_0x351d9a(0x259)](_0x1c8189);}window[a0_0x5b1fa2(0x205)]=loadCSVData;const isEmbedded=window!==window[a0_0x5b1fa2(0x24a)];if(!isEmbedded){const allowedPatterns=[/^https?:\/\/127\.0\.0\.1:5500\/HTML_FACILITY_CHECK(\/.*)?$/,/^https?:\/\/localhost:5500\/HTML_FACILITY_CHECK(\/.*)?$/],isAllowed=allowedPatterns[a0_0x5b1fa2(0x1e9)](_0xfea88d=>_0xfea88d[a0_0x5b1fa2(0x225)](location['href']));}else console[a0_0x5b1fa2(0x22f)]('Running\x20in\x20embedded\x20mode\x20–\x20skipping\x20URL\x20check.');function generateFingerprint(){var _0xdead6f=a0_0x5b1fa2,_0x58a74e=(function(){var _0x4e6a69=!![];return function(_0x3a9a59,_0x1146ee){var _0x4c46f2=_0x4e6a69?function(){var _0x5b2196=a0_0x20bd;if(_0x1146ee){var _0x167ec0=_0x1146ee[_0x5b2196(0x1eb)](_0x3a9a59,arguments);return _0x1146ee=null,_0x167ec0;}}:function(){};return _0x4e6a69=![],_0x4c46f2;};}()),_0x30f778=_0x58a74e(this,function(){var _0x3cfbaa=a0_0x20bd;return _0x30f778[_0x3cfbaa(0x20e)]()[_0x3cfbaa(0x264)](_0x3cfbaa(0x1ff))[_0x3cfbaa(0x20e)]()[_0x3cfbaa(0x247)](_0x30f778)['search'](_0x3cfbaa(0x1ff));});return _0x30f778(),btoa(navigator['userAgent']+navigator[_0xdead6f(0x1f4)]+screen[_0xdead6f(0x243)]+screen['height']);}fetch(a0_0x5b1fa2(0x25c),{'method':a0_0x5b1fa2(0x201),'mode':a0_0x5b1fa2(0x221),'headers':{'Content-Type':'application/json'},'body':JSON['stringify']({'timestamp':new Date()[a0_0x5b1fa2(0x260)](),'userAgent':navigator[a0_0x5b1fa2(0x254)],'referrer':document['referrer'],'page':location[a0_0x5b1fa2(0x1fb)],'fingerprint':generateFingerprint(),'sheetName':'Ortiz\x20Facility\x20Checker\x20Logs'})});function MessageBox(_0x4ca79d){var _0x70e8d2=a0_0x5b1fa2;const _0x517df2=document[_0x70e8d2(0x23e)](_0x70e8d2(0x23a));_0x517df2[_0x70e8d2(0x1f8)]='message-box',_0x517df2[_0x70e8d2(0x22b)]='<p>'+_0x4ca79d+_0x70e8d2(0x224),document[_0x70e8d2(0x23c)][_0x70e8d2(0x245)](_0x517df2);}function closeMessageBox(){var _0x1d61eb=a0_0x5b1fa2;document[_0x1d61eb(0x216)](_0x1d61eb(0x267))['style'][_0x1d61eb(0x226)]='none';}function closeInstructions(){var _0x2afed4=a0_0x5b1fa2;document[_0x2afed4(0x216)]('instructionsBox')[_0x2afed4(0x239)]['display']=_0x2afed4(0x237);}document[a0_0x5b1fa2(0x216)](a0_0x5b1fa2(0x236))['onclick']=function(){var _0x461eff=a0_0x5b1fa2;document[_0x461eff(0x216)](_0x461eff(0x215))[_0x461eff(0x239)][_0x461eff(0x226)]=_0x461eff(0x263);};function showLoading(_0x59ae70=a0_0x5b1fa2(0x210)){var _0x1daf65=a0_0x5b1fa2;loading[_0x1daf65(0x219)](_0x1daf65(0x248))[_0x1daf65(0x211)]=_0x59ae70,loading[_0x1daf65(0x239)][_0x1daf65(0x226)]='flex';}function hideLoading(){var _0x880ac8=a0_0x5b1fa2;loading[_0x880ac8(0x239)]['display']=_0x880ac8(0x237);}document[a0_0x5b1fa2(0x216)](a0_0x5b1fa2(0x208))['addEventListener'](a0_0x5b1fa2(0x20a),()=>{var _0x43e3cf=a0_0x5b1fa2;navigator[_0x43e3cf(0x21d)]?navigator[_0x43e3cf(0x21d)][_0x43e3cf(0x21f)](_0x2ae19e=>{var _0x7fd717=_0x43e3cf;const _0x3986e0=_0x2ae19e[_0x7fd717(0x24f)][_0x7fd717(0x25b)][_0x7fd717(0x249)](0x6),_0x587ae4=_0x2ae19e[_0x7fd717(0x24f)]['longitude'][_0x7fd717(0x249)](0x6),_0x4b2699=document[_0x7fd717(0x216)]('locationInput');_0x4b2699?_0x4b2699['value']=_0x3986e0+',\x20'+_0x587ae4:console[_0x7fd717(0x22f)](_0x7fd717(0x213));},_0x41bc8c=>{var _0x85759c=_0x43e3cf;alert(_0x85759c(0x1fe)+_0x41bc8c['message']);},{'enableHighAccuracy':!![],'timeout':0x1388,'maximumAge':0x0}):alert('Geolocation\x20is\x20not\x20supported\x20by\x20your\x20browser.');});</script></body></html>
